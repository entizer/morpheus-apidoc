## Data Stores

Data Stores can be managed for each Compute Zone (Cloud) in your infrastructure.

<!--## Get All Data Stores for Cloud-->

```shell
curl "<%= api_url %>/api/zones/5/data-stores"
  -H "Authorization: BEARER <%= api_token %>"
```

> The above command returns JSON structured like this:

```json
{
  "datastores": [
    {
      "id": 50,
      "name": "datastore1",
      "zone": {
        "id": 34,
        "name": "test-vmware"
      },
      "type": "generic",
      "freeSpace": 421317836800,
      "online": false,
      "active": false,
      "visibility": "private",
      "tenants": [
        {
          "id": 1,
          "name": "root"
        }
      ]
    }
  ],
  "meta": {
    "size": 7,
    "total": 7,
    "max": 25,
    "offset": 0
  }
}
```

This endpoint retrieves all data stores under a cloud.

### HTTP Request

`GET <%= api_url %>/api/zones/:zoneId/data-stores`

### URL Parameters

Parameter | Description
--------- | -----------
zoneId | The ID of the cloud

### Query Parameters

Parameter | Default | Description
--------- | ------- | -----------
phrase |  | Filter on partial match of name
name |  | Filter on exact match of name

## Get a Specific Data Store

```shell
curl "<%= api_url %>/api/zones/5/data-stores/50" \
  -H "Authorization: BEARER <%= api_token %>"
```

> The above command returns JSON structured like this:

```json
{
  "datastore": {
    "id": 50,
    "name": "datastore1",
    "zone": {
      "id": 34,
      "name": "test-vmware"
    },
    "type": "generic",
    "freeSpace": 421317836800,
    "online": true,
    "active": true,
    "visibility": "private",
    "tenants": [
      {
        "id": 1,
        "name": "root"
      }
    ],
    "resourcePermission": {
      "all": false,
      "sites": [
        {
          "id": 1,
          "name": "group1"
        },
        {
          "id": 2,
          "name": "group2"
        },
      ]
    }
  }
}
```

This endpoint retrieves a specific data store.


### HTTP Request

`GET <%= api_url %>/api/zones/:zoneId/data-stores/:id`

### URL Parameters

Parameter | Description
--------- | -----------
zoneId | The ID of the cloud
id | The ID of the data store to retrieve

## Updating a Data Store

```shell
curl -XPUT "<%= api_url %>/api/zones/5/data-stores/50" \
  -H "Authorization: BEARER <%= api_token %>" \
  -H "Content-Type: application/json" \
  -d '{"datastore":{
    "active": true,
    "visibility": "private",
    "tenantPermissions": {
      "accounts": [1,2,3,4,5]
    },
    "resourcePermissions": {
      "all": false,
      "sites": [
        {"id": 1}, {"id": 2}, {"id": 3}
      ]
    }
  }}'
```

> The above command returns JSON structured like getting a single data store:

This endpoint allows updating settings for a data store.

### HTTP Request

`PUT <%= api_url %>/api/zones/:zoneId/data-stores/:id`

### URL Parameters

Parameter | Description
--------- | -----------
zoneId | The ID of the cloud
id | The ID of the data store

### JSON Parameters

Parameter | Default | Description
--------- | ------- | -----------
active      |  | Activate (true) or disable (false) the datastore
visibility      | private | private or public
tenantPermissions.accounts  |  | Array of tenant account ids that are allowed access
tenantPermissions.defaultTarget  |  | Array of tenant account ids which should use the data store as the Default
tenantPermissions.defaultStore  |  | Array of tenant account ids which should use the data store as the Image Target
resourcePermissions.all  |  | Pass true to allow access all groups
resourcePermissions.sites  |  | Array of groups that are allowed access
